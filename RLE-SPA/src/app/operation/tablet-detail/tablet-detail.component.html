<div class="mt-5 animated bounceInDown">
    <div class="row d-flex justify-content-center">
        <mdb-card class="col-md-10">
            <div class="form-row">
                <form style="color: #757575;" [formGroup]="searchForm">
                    <div class="col">
                        <div class="md-form form-sm">
                            <input mdbInput type="text" id="imei" formControlName="imei" class="form-control"
                                (ngModelChange)="verifyImei()">
                            <label for="imei">Entrer l'imei</label>
                            <mdb-error *ngIf="noResult">{{noResult}}</mdb-error>
                            <div *ngIf="tablet"><span class="text-success"><i class="fa fa-check"></i> <b
                                        class="text-center" *ngIf="tablet">
                                        <span *ngIf="tablet.status===0"> en panne </span>
                                        <span *ngIf="!tablet.store.employeeId">dans le {{tablet.store.name}}</span>
                                        <span *ngIf="tablet.store.employeeId">dans le sac de
                                            {{tablet.store.employee.lastName}}
                                            {{tablet.store.employee.firstName}}({{tablet.store.employee.region.name}})</span>
                                    </b></span>
                            </div>
                        </div>
                    </div>
                </form>

                <div class="col" *ngIf="tablets?.length>0">
                    <div class="md-form form-sm">
                        <mdb-select [options]="tablets" (ngModelChange)="selectTablet($event)" placeholder="choisir la tablets" [(ngModel)]="tabletId">
                        </mdb-select>
                    </div>
                </div>
                <div class="col">
                    <div class="md-form form-sm">
                        <button type="button" (click)="searchTabletDetails()" [disabled]="!tablet" size="sm" mdbBtn
                            color="primary" mdbWavesEffect>rechercher</button>
                    </div>
                </div>

            </div>

        </mdb-card>
        <mdb-card *ngIf="showSearchDiv" class="col-md-10 mt-2">
            <table class="table table-striped table-sm" style="font-size: 12px;">
                <thead>
                    <tr>
                        <th style="width: 20%;">Type</th>
                        <th style="width: 20%;"> Date</th>
                        <th>Observation</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of inventOps ; let i = index"
                        [@animate]="{value:'*',params:{delay: (i*100)+'ms', y:'50px'}}">
                        <td style="vertical-align: middle;">{{item.type}}</td>
                        <td style="vertical-align: middle;">
                            <span
                                *ngIf="item.inventOpTypeId === 5 || item.inventOpTypeId === 10 || item.inventOpTypeId === 9">
                                {{item.opDate|date:'dd/MM/yyyy'}} à
                                {{item.opDate|date:'HH:mm:ss'}}
                            </span>
                            <span
                                *ngIf="item.inventOpTypeId !== 5 && item.inventOpTypeId !== 10 && item.inventOpTypeId !== 9">
                                {{item.opDate|date:'dd/MM/yyyy'}}
                            </span>
                        </td>
                        <td style="vertical-align: middle;">
                            <div [innerHTML]="item.details"></div>
                        </td>
                        <td style="vertical-align: middle;">
                            <span>
                                <button *ngIf="currentUserId === item.insertUserId" type="button" mdbBtn class="m-0"
                                    color="danger" size="sm" mdbWavesEffect
                                    (click)="getSelectedId(item.ecDataId);basicModal.show()">supprimer</button>
                                <button *appHasRole="['SuperAdmin', 'Supervisor']" type="button" mdbBtn class="m-0"
                                    color="danger" size="sm" mdbWavesEffect
                                    (click)="getSelectedId(item.ecDataId);basicModal.show()">supprimer</button>
                            </span>
                        </td>
                    </tr>
                </tbody>
                <!-- <tr *ngFor="let item of inventOps ; let i = index"
                    [@animate]="{value:'*',params:{delay: (i*100)+'ms', y:'50px'}}">
                    <td>
                        <b>
                            <span *ngIf="item.inventOpTypeId === 5 && item.tabletId===tablet.id">Panne</span>
                            <span *ngIf="item.inventOpTypeId === 10">Point Tablette</span>
                            <span *ngIf="item.inventOpTypeId === 6">Export</span>
                            <span *ngIf="item.inventOpTypeId === 1">Entrée Stock</span>
                            <span *ngIf="item.inventOpTypeId === 3">Transfert Stock</span>
                            <span *ngIf="item.inventOpTypeId === 9">Maintenance </span>
                        </b>
                    </td>
                    <td>
                        <span
                            *ngIf="item.inventOpTypeId === 5 || item.inventOpTypeId === 10 || item.inventOpTypeId === 9">
                            {{item.opDate|date:'dd/MM/yyyy'}} à
                            {{item.opDate|date:'HH:mm:ss'}}
                        </span>
                        <span
                            *ngIf="item.inventOpTypeId !== 5 && item.inventOpTypeId !== 10 && item.inventOpTypeId !== 9">
                            {{item.opDate|date:'dd/MM/yyyy'}}
                        </span>
                    </td>

                    <td>
                        <span *ngIf="item.inventOpTypeId === 5 && item.tabletId===tablet.id">
                            {{item.failure.failureList1.name}} <span *ngIf="item.failure.note1">(
                                {{item.failure.note1}})</span>
                        </span>
                        <span *ngIf="item.inventOpTypeId === 10">
                            Cat 1 : <b>{{item.ecData.cat1}}</b> | Cat 2 :<b>{{item.ecData.cat2}}</b> . region :
                            <b>{{item.ecData.region.name}}</b>
                            <button *ngIf="currentUserId === item.ecData.insertUserId" type="button" mdbBtn
                                color="danger" size="sm" mdbWavesEffect
                                (click)="getSelectedId(item.ecDataId);basicModal.show()">supprimer</button>
                        </span>
                        <span *ngIf="item.inventOpTypeId === 6">Export</span>
                        <span *ngIf="item.inventOpTypeId === 1">
                            De <span *ngIf="item.fromStore.employeeId"> magasin {{item.fromStore.employee.lastname}}
                                {{item.fromStore.employee.firstName}}</span>
                            <span *ngIf="!item.fromStore.employeeId"> {{item.fromStore.name}}</span>
                            vers
                            <span *ngIf="item.toStore.employeeId"> magasin {{item.toStore.employee.lastname}}
                                {{item.toStore.employee.lastname}}</span>
                            <span *ngIf="!item.toStore.employeeId"> {{item.toStore.name}}</span>
                        </span>
                        <span *ngIf="item.inventOpTypeId === 3">
                            De <span *ngIf="item.fromStore.employeeId"> magasin {{item.fromStore.employee.lastname}}
                                {{item.fromStore.employee.firstName}}</span>
                            <span *ngIf="!item.fromStore.employeeId"> {{item.fromStore.name}}</span>
                            vers
                            <span *ngIf="item.toStore.employeeId"> magasin {{item.toStore.employee.lastname}}
                                {{item.toStore.employee.lastname}}</span>
                            <span *ngIf="!item.toStore.employeeId"> {{item.toStore.name}}</span>
                        </span>
                        <span *ngIf="item.inventOpTypeId === 9">
                            <span *ngIf="!item.tabletExId">
                                maintenance sur la tablette <b>{{item.tablet.imei}}</b>

                            </span>
                            <span *ngIf="item.tabletExId">
                                tablette <b>{{item.tablet.imei}}</b> échangée par <b>{{item.tabletEx.imei}}</b>

                            </span>
                        </span>


                    </td>

                </tr> -->
            </table>
        </mdb-card>

    </div>


</div>



<div mdbModal #basicModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close pull-right" aria-label="Close" (click)="basicModal.hide()">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title w-100" id="myModalLabel">confirmation</h4>
            </div>
            <div class="modal-body">
                <h3 class="text-danger">confirmer vous cette suppression?</h3>
            </div>
            <div class="modal-footer">
                <button type="button" mdbBtn color="light" size="sm" class="waves-light" aria-label="Close"
                    (click)="basicModal.hide()" mdbWavesEffect>fermer</button>
                <button type="button" (click)="removeEcData();basicModal.hide()" mdbBtn color="danger" size="sm"
                    class="relative waves-light" mdbWavesEffect>supprimer</button>
            </div>
        </div>
    </div>
</div>