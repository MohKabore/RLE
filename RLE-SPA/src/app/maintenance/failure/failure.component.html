


<div  class="container mt-5 animated bounceInDown">
  <form style="color: #757575;" [formGroup]="failureForm">
    <mdb-card class="pb-3 pl-3">
      <table style="width: 100%;">
        <tr>
          <td colspan="3" style="text-align: center;"> <b><span class="text-danger pt-1">Selectionner le department pour renseigner la tablette</span></b></td>

        </tr>
        <tr>
          <td style="width: 30%;">Agent Hotline*</td>
          <td>:</td>
          <td>
            <mdb-select [options]="hotliners"  formControlName="hotliner1Id"></mdb-select>
            
          </td>
        </tr>
        <tr>
          <td>Region</td>
          <td>:</td>
          <td>
            <mdb-select [options]="regions" formControlName="regionId" (ngModelChange)="getDepartments()" (ngModelChange)="getSelectedMaints()"></mdb-select>

          </td>
        </tr>

        <tr>
          <td>Département</td>
          <td>:</td>
          <td>
            <mdb-select [options]="depts" formControlName="departmentId" (ngModelChange)="getSelectedMaints()"></mdb-select>

          </td>
        </tr>
        <tr>
          <td>Date et Heure</td>
          <td>:</td>
          <td>
            <div class="md-form mdb-date-time">
              <!-- <mdb-date-picker name="mydate" [inline]="true" [options]="myDatePickerOptions"
                [placeholder]="'choisir la date et l\'heure'" formControlName="mvtDate"></mdb-date-picker> -->
    
              <input (focus)="this.datePicker.openBtnClicked()" #input id="tm" name="tm" class="form-control date-time picker-opener"
                data-open="picker2" placeholder="Date et heure"  type="text" />
              <mdb-date-picker formControlName="startDate" (dateChanged)="onDateChange($event)" [options]="myDatePickerOptions" #datePicker>
              </mdb-date-picker>
              <mdb-time-picker formControlName="startTime" (timeChanged)="onTimeChange($event)" [buttonLabel]="'ok'" [twelvehour]="false" #timePicker>
              </mdb-time-picker>
            </div>
          </td>
        </tr>
        <tr>
          <td>tablette*</td>
          <td>:</td>
          <td>
            <div class="md-form form-sm mt-0 mb-0">
              <input mdbInput type="text" id="imei" formControlName="imei" class="form-control" (ngModelChange)="verifyImei()">
              <label for="imei">Entrer l'imei</label>
              <span class="text-success" *ngIf="tabletId"><i class="fa fa-check" aria-hidden="true"></i></span>
              <span class="text-danger" *ngIf="noResult">{{noResult}}</span>
            </div>
            <!-- <mdb-select [options]="tablets" formControlName="tabletId"></mdb-select> -->
          </td>
        </tr>
        <tr>
          <td>Panne*</td>
          <td>:</td>
          <td>
            <mdb-select [options]="faliureList" formControlName="failureList1Id"></mdb-select>
          </td>
        </tr>
      </table>
    </mdb-card>

    <mdb-card class="mt-2 pb-3 pl-3">
      <table style="width: 100%;">
        <tr>
          <td colspan="3" style="text-align: center;"> <b><span class="text-danger pt-1">Télémaintenance</span></b></td>
        </tr>
        <tr>
          <td style="width: 30%;">Action*</td>
          <td>:</td>
          <td>
            <mdb-select [options]="repairAction" placeholder="action tentée" formControlName="repairAction1Id">
            </mdb-select>
          </td>
        </tr>
        <tr>
          <td>Observation</td>
          <td>:</td>
          <td>
            <div class="md-form">
              <textarea type="text" id="note1" class="md-textarea form-control" formControlName="note1" mdbInput></textarea>
              <label for="note1">Observation</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>tablette réparée ?</td>
          <td>:</td>
          <td valign="bottom">
            <div class="md-form">
              <div class="form-check form-check-inline">
                <input type="radio" checked class="form-check-input" id="materialInline1" [value]="1" (change)="hide()"
                  formControlName="repaired" name="repaired"  mdbInput>
                <label class="form-check-label" for="materialInline1">Oui</label>
              </div>

              <!-- Material inline 2 -->
              <div class="form-check form-check-inline ">
                <input type="radio" class="form-check-input" formControlName="repaired" id="materialInline2" [value]="0"
                name="repaired" (change)="show()"  mdbInput>
                <label class="form-check-label" for="materialInline2">Non</label>
              </div>
            </div>
          </td>
        </tr>
      </table>



    </mdb-card>

    <mdb-card class="mt-2 pb-3 pl-3" *ngIf="showMaintDiv">
      <table style="width: 100%;">
        <tr>
          <td colspan="3" style="text-align: center;"> <b><span class="text-danger pt-1">Intervention</span></b></td>
        </tr>
        <tr>
          <td style="width: 30%;">
            <mdb-select [options]="maints" placeholder="maintenancier" formControlName="fieldTech1Id">
            </mdb-select>
          </td>
          <td><!-- Material unchecked -->
            <mdb-checkbox formControlName="joined">injoignable(plusieurs tentatives)</mdb-checkbox></td>
          <td>
          
          </td>
        </tr>
        </table>
    </mdb-card>
    <mdb-card>
      <div  class="text-center">
      <span *ngIf="wait"> patienter...</span>
        <button type="button"  mdbBtn color="primary" [disabled]="!failureForm.valid || wait" size="sm" mdbWavesEffect (click)="basicModal.show()"> {{buttonLabel}}</button>
      </div>
    </mdb-card>
  </form>
</div>

<div mdbModal #basicModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="basicModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">CONFIRMATION</h4>
      </div>
      <div class="modal-body">
        confirmez-vous l'enregistrement ??
      </div>
      <div class="modal-footer">
        <button type="button" mdbBtn color="light" size="sm" class="waves-light" aria-label="Close" (click)="basicModal.hide()" mdbWavesEffect>annuler</button>
        <button type="button" mdbBtn color="success" size="sm" class="relative waves-light"  (click)="basicModal.hide();save()" mdbWavesEffect>enregistrer</button>
      </div>
    </div>
  </div>
</div>